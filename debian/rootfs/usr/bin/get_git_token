#!/bin/bash

# shellcheck disable=SC1090,SC1091,SC2155

. /etc/s6/s6-init/envs

GIT_API_URL="${GIT_PROTOCOL}://${GIT_USERNAME}:${GIT_PASSWORD}@${GIT_DOMAIN}/api/v1/users/${GIT_USERNAME}/tokens"


case "${GIT_TYPE,,}" in
  "gitea"|"gogs")
	curl -skL "$GIT_API_URL" | jq -r '.[] | select (.name == "quickon-zentao").name'
  ;;
  "gitlab")
  	echo "获取Gitlab Token"
  ;;
esac
